!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pages/pc/address/index",[],t):"object"==typeof exports?exports["pages/pc/address/index"]=t():e["pages/pc/address/index"]=t()}(this,function(){return function(e){function t(s){if(a[s])return a[s].exports;var d=a[s]={exports:{},id:s,loaded:!1};try{e[s].call(d.exports,d,d.exports,t)}catch(i){if("string"==typeof i&&(i=new Error(i)),i.hasReported)return;throw i.hasReported=!0,window._trace&&window._trace.sendMsg&&"function"==typeof window._trace.sendMsg&&window._trace.sendMsg(i),console&&console.warn&&console.warn(i),i}return d.loaded=!0,d.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";window.pub_navlist_wrap_init&&pub_navlist_wrap_init.init(),window.isMeilishuo=/meilishuo.com/.test(window.location.hostname),window.hostname=isMeilishuo?"meilishuo":"mogujie",window.loginUrl=isMeilishuo?"//www.meilishuo.com/user/login":"//portal.mogujie.com/user/newlogin",document.body.id+=" site-"+hostname;var s=a(1),d=a(4),i=a(3),n=!1,r={init:function(){this.render()},render:function(){var e=this;$.ajax({url:"/ajax/getReceiveAddressListActionlet/1",dataType:"json",type:"POST"}).done(function(t){if("SESSION_INVALID"==t.returnCode)return void(location.href=i.getURLWithPtp(window.loginUrl));if("success"==t.returnCode){var a=MoGu.ui.getTemplate(d,t.data);$("#address_wrap").html(a),e.bindEvent()}else alert(t.message)}).fail(function(){})},bindEvent:function(){$(".J_default").on("click",this.setDefault),$(".oper").on("click",".del",this.delAddress),$(".edit").on("click",this.editAddress),$("#J_saddAddress").on("click",this.addAddress)},addAddress:function(){s.init()},editAddress:function(e){s.init($(this).attr("aid"))},delAddress:function(){var e=$(this).attr("aid");$.ajax({url:"/ajax/deleteReceiveAddressActionlet/1",dataType:"json",type:"POST",data:{addressId:e}}).done(function(e){return"SESSION_INVALID"==e.returnCode?void(location.href=i.getURLWithPtp(window.loginUrl)):void("success"==e.returnCode?e.data&&location.reload():alert(e.message))}).fail(function(){})},setDefault:function(){if(!n){var e=$(this).attr("aid");n=!0,$.ajax({url:"/ajax/setReceiveAddressDefaultActionlet/1",type:"POST",dataType:"json",data:{addressId:e}}).done(function(e){return"SESSION_INVALID"==e.returnCode?void(location.href=i.getURLWithPtp(window.loginUrl)):void("success"==e.returnCode?location.reload():alert(e.message))}).always(function(){n=!1})}}};r.init(),e.exports=r},function(e,t,a){"use strict";var s=a(2),d=a(3),i={init:function(e){this.provinceWrap=$("#J_province"),this.cityWrap=$("#J_city"),this.areaWrap=$("#J_area"),this.addressId=e,void 0!=e?this.render(e):this.renderBlank()},renderBlank:function(){var e={},t=this;e.address=[{province:"",city:"",area:"",street:"",addressId:"",realName:"",phone:"",isDefault:!1,zip:"",mobile:"",address:""}],$.ajax({url:"//s10.mogucdn.com/new1/v1/bmisc/82c3fb334ddbd3af52bc4f148fbb4a67/199792409494.json",dataType:"json",type:"GET"}).done(function(a){t.locations=a.result.location;e.address.province,t.locations[0][0].id;e.location=t.locations;var d=MoGu.ui.getTemplate(s,e);$(".address_wrapper").html(d),$(".address_wrapper").show(),t.select(),t.bindEvent()}).fail(function(){})},render:function(e){var t=this;this.model||(this.model={}),$.ajax({url:"/ajax/getReceiveAddressByAddressIdActionlet/1",dataType:"json",type:"POST",data:{addressId:e}}).done(function(e){if("SESSION_INVALID"==e.returnCode)return void(location.href=d.getURLWithPtp(window.loginUrl));if("success"==e.returnCode){var a={};a.address=[],a.address.push(e.data),t.model.mobile=e.data&&e.data.mobile||"",t.model.hidePartMobile=e.data&&e.data.hidePartMobile||"",$.ajax({url:"//s10.mogucdn.com/new1/v1/bmisc/82c3fb334ddbd3af52bc4f148fbb4a67/199792409494.json",dataType:"json",type:"GET"}).done(function(d){t.locations=d.result.location;a.address.province,t.locations[0][0].id;a.location=t.locations;var i=MoGu.ui.getTemplate(s,a);$(".address_wrapper").html(i),$(".address_wrapper").show(),t.selectArea(),t.bindEvent(),t.setLocation(e.data.province,e.data.city,e.data.area)}).fail(function(){})}else alert(e.message),location.reload()}).fail(function(){})},bindEvent:function(){$(".confirm_btn").on("click",this.modify.bind(this)),$(".J_cancelbtn").on("click",this.cancelEdit)},cancelEdit:function(){$(".address_wrapper").html("")},modify:function(){var e,t,a;$(".J_province").find("option").each(function(t,a){$(a).val()==$(".J_province").val()&&(e=$(a).text())}),$(".J_city").find("option").each(function(e,a){$(a).val()==$(".J_city").val()&&(t=$(a).text())}),$(".J_area").find("option").each(function(e,t){$(t).val()==$(".J_area").val()&&(a=$(t).text())});var s=$(".J_addressid").val(),i=$(".J_name").val(),n=$(".J_mobile").val(),r=$(".J_postcode").val(),o=$(".J_isdefault").val(),l=$(".J_street").val();if("\u8bf7\u9009\u62e9"==e||"\u8bf7\u9009\u62e9"==t||"\u8bf7\u9009\u62e9"==a||""==e||""==t||""==a)return void $(".city_select").addClass("notice").text("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u5730\u5740");if($(".city_select").removeClass("notice").text(""),!/^[0-9]{6}/.test(r)||6!=r.length)return $(".J_postcode").addClass("error"),void $(".mail_select").addClass("notice").text("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u653f\u7f16\u7801");if($(".J_postcode").removeClass("error"),$(".mail_select").removeClass("notice").text(""),l.length<5||l.length>100)return $(".J_street").addClass("error"),void $(".breakline").addClass("notice").text("\u8bf7\u586b\u5199\u8857\u9053\u5730\u5740\uff0c\u6700\u5c115\u4e2a\u5b57\uff0c\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57");if($(".J_street").removeClass("error"),$(".breakline").removeClass("notice").text(""),""==i)return $(".J_name").addClass("error"),void $(".name_select").addClass("notice").text("\u8bf7\u586b\u5199\u6536\u8d27\u4eba");if($(".J_name").removeClass("error"),$(".name_select").removeClass("notice").text(""),-1!=(""+n).indexOf("*")){if(n!=this.model.hidePartMobile)return void $(".mobile_select").addClass("notice").text("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u8054\u7cfb\u53f7\u7801");n=this.model.mobile,$(".J_mobile").removeClass("error"),$(".mobile_select").removeClass("notice").text("")}else{if(!/^[0-1]{1}[34578]{1}[0-9]{9}$/.test(n))return $(".J_mobile").addClass("error"),void $(".mobile_select").addClass("notice").text("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u8054\u7cfb\u53f7\u7801");$(".J_mobile").removeClass("error"),$(".mobile_select").removeClass("notice").text("")}var c;c=void 0!=this.addressId?"/ajax/modifyReceiveAddressActionlet/1":"/ajax/addReceiveAddressActionlet/1",$.ajax({url:c,data:{province:e,city:t,area:a,street:"",addressId:s,realName:i,phone:"",isDefault:o,zip:r,mobile:n,address:l},type:"POST",dataType:"json"}).done(function(e){return"SESSION_INVALID"==e.returnCode?(alert("\u8bf7\u767b\u5f55"),void(location.href=d.getURLWithPtp(window.loginUrl))):void("success"==e.returnCode?location.reload():alert(e.message))}).fail(function(){})},select:function(e,t,a){var s=this,e=e||$(".J_province").val(),t=t||this.locations[e][0].id,a=a||this.locations[t][0].id,d=this.locations[e],i=this.locations[t],n=["{{~ it:city:index}}",'<option value="{{=city.id}}" {{? (city.id == it.selected)}} selected="selected" {{?}}>{{=city.name}}</option>',"{{~}}"].join(""),r=MoGu.ui.getTemplate(n,d);$(".J_city").html(r);var o=MoGu.ui.getTemplate(n,i);$(".J_area").html(o),$(".J_province").off().on("change",function(){s.selectArea($(this).val())}),$(".J_city").on("change",function(){s.selectArea(void 0,$(this).val())})},selectArea:function(e,t,a){var s=this,e=e||$(".J_province").val(),t=t||this.locations[e][0].id,a=a||this.locations[t][0].id,d=this.locations[e],i=this.locations[t];d.selected=t,i.selected=a;var n=["{{~ it:city:index}}",'<option value="{{=city.id}}" {{? (city.id == it.selected)}} selected="selected" {{?}}>{{=city.name}}</option>',"{{~}}"].join(""),r=MoGu.ui.getTemplate(n,d);$(".J_city").html(r);var o=MoGu.ui.getTemplate(n,i);$(".J_area").html(o),$(".J_province").off().on("change",function(){s.selectArea($(this).val())}),$(".J_city").on("change",function(){s.selectArea(void 0,$(this).val())})},setLocation:function(e,t,a){var s=$("#home_address-sprovince"),d=$("#home_address-scity"),i=$("#home_address-sarea");s.attr("data-tmp",e),d.attr("data-tmp",t),i.attr("data-tmp",a),this.initSeletion("province"),this.initSeletion("city"),this.initSeletion("area")},initSeletion:function(e){var t=$("#home_address-s"+e),a=t.attr("data-tmp");a&&""!==a&&(t.find("option").each(function(e,s){var d=$(s);return d.html()===a?(t[0].selectedIndex=e,t.trigger("change"),!1):void 0}),t.attr("data-tmp",""))}};e.exports=i},function(e,t){e.exports='<div class="__addressPop">\n    <dl class="address_pop">\n        <input type="hidden" class="J_addressid" name="addressId" value="{{=it.address[0].addressId}}" />\n        <input type="hidden" class="J_isdefault" name="addressId" value="{{=it.address[0].isDefault}}" />\n        <dt>\u7701\uff1a</dt>\n        <dd class="pt_ie6hack">\n            <i class="needicon">*</i>\n            <select name="province" id="home_address-sprovince" class="J_province J_select w140 vm">\n              <!-- <option value="0">\u8bf7\u9009\u62e9</option> -->\n              {{~it.location[0]:city:index}}\n              <option value="{{=city.id}}" {{?city.name==it.address[0].province}}selected{{??}}{{?}}>{{=city.name}}</option>\n              {{~}}\n            </select>\n            <label class="dt" for="">\u5e02\uff1a</label>\n            <select name="city" id="home_address-scity" class="J_city J_select w100 vm"> </select>\n            <label class="dt" for="">\u533a\uff1a</label>\n            <select name="area" id="home_address-sarea" class="J_area J_select w100 vm"> </select>\n            <span class="prompt city_select"></span>\n        </dd>\n        <dt>\u90ae\u653f\u7f16\u7801\uff1a</dt>\n        <dd>\n            <i class="needicon">*</i>\n            <input type="text" data-type="c" data-errormsg="\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u653f\u7f16\u7801" data-normal="" class="text formsize_normal J_postcode J_form vm" name="postcode" value={{=it.address[0].zip\n            }}>\n            <span class="prompt mail_select"></span>\n        </dd>\n\n        <dt>\u8857\u9053\u5730\u5740\uff1a</dt>\n        <dd>\n            <i class="needicon">*</i>\n            <textarea data-type="*" data-min="5" data-max="100" data-normal="\u8bf7\u586b\u5199\u8857\u9053\u5730\u5740\uff0c\u6700\u5c115\u4e2a\u5b57\uff0c\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57" data-errormsg="\u8bf7\u586b\u5199\u8857\u9053\u5730\u5740\uff0c\u6700\u5c115\u4e2a\u5b57\uff0c\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57" class="textarea formsize_large J_street J_form" name="street" cols="30" rows="3">{{=it.address[0].address}}</textarea>\n            <span class="prompt breakline">\u8bf7\u586b\u5199\u8857\u9053\u5730\u5740\uff0c\u6700\u5c115\u4e2a\u5b57\uff0c\u6700\u591a\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57</span>\n        </dd>\n        <dt>\u6536\u8d27\u4eba\u59d3\u540d\uff1a</dt>\n        <dd>\n            <i class="needicon">*</i>\n            <input type="text" data-type="*" data-errormsg="\u8bf7\u586b\u5199\u6536\u8d27\u4eba" data-normal="" class="text formsize_normal J_name J_form vm" name="name" value={{=it.address[0].realName}}>\n            <span class="prompt name_select"></span>\n        </dd>\n        <dt>\u624b\u673a\uff1a</dt>\n        <dd>\n            <i class="needicon">*</i>\n            <input type="text" data-type="phone" data-errormsg="\u8bf7\u586b\u5199\u6b63\u786e\u7684\u8054\u7cfb\u53f7\u7801" data-normal="" class="text formsize_normal J_mobile J_form vm" name="mobile" value={{=it.address[0].hidePartMobile || \'\'}}>\n            <span class="prompt mobile_select"></span>\n        </dd>\n        <dt></dt>\n        <dd class="pt10 oper_btn">\n            <a href="javascript:;" class="confirm_btn J_okbtn mr10">\u786e\u8ba4\u5730\u5740</a>\n            <a href="javascript:;" class="cancel_btn J_cancelbtn">\u53d6\u6d88</a>\n        </dd>\n    </dl>\n</div>\n'},function(e,t){"use strict";var a={getURLWithPtp:function(e){return window.logger?logger.generatePtpParams(e):e},escapeHtml:function(e){return"string"!=typeof e?e:e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}};e.exports=a},function(e,t){e.exports='<div class="addr_right topay" isaddress=\'true\'>\n\n    <!-- <select id="provinceId"></select>\n    <select id="cityId"></select>\n    <select id="areaId"></select> -->\n\n    <h2 class="addr_title">\u5730\u5740\u7ba1\u7406</h2>\n    <div class="addr_edit" id="J_s_addr_edit">\n        <div class="add_new_addr clearfix"><span id="J_saddAddress">+\u6dfb\u52a0\u5730\u5740</span></div>\n        <div class="addressbox_warp">\n            <div class="addressbox" id="J_sAddrWrap"></div>\n            <div class="address_wrapper"></div>\n            <!-- <div class="addressbox addressfirst addresslist" action="/trade/address/addfororder">\n            </div> -->\n        </div>\n        {{~it.receiveAddressList:address:index }}\n        <div class="addr_section {{? address.isDefault==1}}default{{??}}{{?}}" aid="{{=address[\'addressId\']}}">\n            <ul class="clearfix">\n                <li class="name">{{=address[\'realName\']}}</li>\n                <li class="addr"\n                    data-province="{{=address[\'province\']}}"\n                    data-city="{{=address[\'city\']}}"\n                    data-area="{{=address[\'area\']}}"\n                    data-street="{{=address[\'address\']}}">\n                    {{=address[\'province\']}}{{=address[\'city\']}}{{=address[\'area\']}}{{=address[\'address\']}}\n                </li>\n                <li class="zcode">{{=address[\'zip\']}}</li>\n                <li class="mobile">{{=address[\'hidePartMobile\']}}</li>\n                <li class="oper">\n                    <a href="javascript:;" {{? address[\'isDefault\']!=1 }}class="J_default"{{??}}{{?}} aid={{=address[\'addressId\']}}>{{? address[\'isDefault\']==1 }}\u9ed8\u8ba4\u5730\u5740{{??}}\u8bbe\u4e3a\u9ed8\u8ba4{{?}}</a>\n                    <a href="javascript:;" class="edit" aid={{=address[\'addressId\']}}>\u7f16\u8f91</a>\n                    <a href="javascript:;" class="del nobd" aid={{=address[\'addressId\']}}>\u5220\u9664</a>\n                </li>\n                <li class="enaddr"></li>\n            </ul>\n        </div>\n        {{~}}\n    </div>\n</div>\n'}])}),"function"==typeof define&&define.amd&&require(["pages/pc/address/index"]);