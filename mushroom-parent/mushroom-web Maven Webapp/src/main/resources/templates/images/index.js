define("module/base",[],function(){window._getQueryString=function(a,n){var n=n||window.location.search;if(!a){var r=n.substring(1,n.length).split(/[&=]/),e={};return $.each(r,function(a,n){a%2===0&&(e[n]=r[a+1])}),e}var t=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),o=n.substr(1).match(t);return null!=o?unescape(o[2]):null},window._getWallParam=function(a){var n="",r=$('.param_container .ajax_param[param-name|="'+a+'"]');return r.length>0&&(n=r.val()),n},window._setWallParam=function(a,n){var r=$('.ajax_param[param-name|="'+a+'"]');r.length>0?r.val(n):$(".param_container").append('<input type="hidden" class="ajax_param" param-name="'+a+'" value="'+n+'" />')},window._getWallAllParams=function(){var a={},n=$(".param_container").find(".ajax_param");return n.each(function(){var n=$(this);n.attr("param-name")&&(a[n.attr("param-name")]=n.val())}),a},window._setWallAllParams=function(a){$.map(a,function(a,n){_setWallParam(n,a)})},window._getCookie=function(a){var n,r=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(n=document.cookie.match(r))?unescape(n[2]):null},window._isEmptyObject=function(a){for(var n in a)return!1;return!0},window._getValueInObj=function(a,n){var r=$.map([].concat(n),function(n){var r=a,e=[];$.map(n.split(/\.|\[|\]|'|"/),function(a){""!==a&&e.push(a)});try{$.map(e,function(a){r=r[a]})}catch(t){window.console&&console.error&&console.error(t)}return r});return $.isArray(n)?r:r[0]},window._scrollTop=function(a){$(window).scrollTop(a)}}),require(["module/base"],function(){});define("module/temp",function(){function a(a,e){return a+(e||"#common_goods_wall")}function e(a){return null===a||"undefined"==typeof a?"":a}var t={ajaxParams:function(a,e){return'<input type="hidden" class="ajax_param" param-name="'+a+'" value="'+e+'" autocomplete="off">'},nav:{container:function(a,e){},sort:function(a,e){},definedPrice:function(a,e){},price:function(a,e){},tags:function(a,e){},doubleEleven:function(a,e){}},goods:{getGoodsHtml:function(a,e,t){},getWedgeImgHtml:function(a,e){},noGoods:function(a,e){}},pageTags:{dom:function(a,e){}}};t.nav.container=function(e){var t=e.result.wall,n=t.pager.url;if(n){var r=n.match("\\?[^/]*$","ig")?n.match("\\?[^/]*$","ig")[0].substr(1):"",s=n.replace(self.urlParams,""),o=new RegExp("#[\\w]+","ig"),l=i(o,r);""!==l&&"&"!==l.charAt(0)&&(l="&"+l),s=i(o,s);var c=a(s+l).replace("_page_","1"),d=e.result.param?e.result.param.ptpPartC:null;return['<form data-ptp-customc="'+d+'_tagList" action="'+c+'" class="price_custom" method="GET" >','<div class="sp_filter clearfix sort_nav">','<div class="nav_left fl clearfix">',"</div>",'<div class="nav_right fl clearfix">',"</div>","</div>","</form> "].join("")}},t.nav.sort=function(e,t){var i=e.result.sortList,n="";return $.each(i,function(e,i){n+='<a data-ptp-customc="'+t+'_sortList" sort-key="'+i.sortKey+'" class="sort fl" href="'+a(i.url)+'" data-mark="sort" tab-index="'+e+'">'+i.title+"</a>"}),""!==n?'<div class="sort_container fl">'+n+"</div>":""},t.nav.definedPrice=function(){return['<div class="price fl">','<div class="txt">','<span class="rmb">￥</span>','<input type="text" class="from" value="" name="minPrice">',"</div>",'<span class="divid">-</span>','<div class="txt">','<span class="rmb">￥</span>','<input type="text" class="to" value="" name="maxPrice">',"</div>",'<a class="sbt definedprice" href="#" data-mark="definedPrice">确定</a>',"</div>"].join("")},t.nav.price=function(e,i,n){var r=(t.nav,e.result.priceList),s="";return $.map(r,function(e,t){var r=n.replace("_minPrice_",e.min).replace("_maxPrice_",e.max);s+=['<li class="price_citem">',"<a data-ptp-customc='"+i+"_priceList' href='"+a(r)+"' data-mark='price'>"+e.min+"-"+e.max+"</a>","</li>"].join("")}),""!==s?'<ul class="price_choice fl">'+s+"</ul>":""};var i=function(a,e){var t=e.match(a);return t&&$.each(t,function(a){e=e.replace(t[a],"")}),e};t.nav.tags=function(a,i){var n=t.nav;n.urlParams=location.search;var r=a.result.tagList,s="",o=e(_getWallParam("tag"));return tagsStr=""===o?[]:o.split(","),$.map(r,function(a,e){var t=$.inArray(a.postkey,tagsStr)>=0?"checked":"";s+=['<a class="mgl" data-mark="tags" href="">',"<input "+t+' type="checkbox" value="'+a.postkey+'">','<label for="tag'+a.postkey+'">'+a.name+"</label>","</a>"].join("")}),['<div class="nav_inner fl">','<span class="nav_more"></span>','<div class="filters">','<input type="hidden" class="tagStr" value="" name="tag" data-ptp-customc="'+i+'_tagList">',s,"</div>","</div>"].join("")},t.nav.doubleEleven=function(a,e){var i=t.nav;i.urlParams=location.search;var n="",r=a.result.doubleEleven,s=r.itemMarks==a.result.param.itemMarks?'checked="checked"':"";return n+=['<div class="nav_eleven_box fl" id="nav_eleven_box">','<input type="checkbox" '+s+' mark-id="'+r.itemMarks+'" id="nav_eleven_check" class="nav_eleven_check fl">','<label for="nav_eleven_check" class="nav_eleven_lab fl">','<img class="nav_eleven_img" src="'+r.image+'">',"</label>",'<a class="nav_eleven_link" href="javascript:;" tpl-url="'+r.url+'"></a>',"</div>"].join("")},t.goods={isOnlyNormalGoods:!1,getItemHtml:function(a,e,t){if(a.type){if(this.isOnlyNormalGoods&&2!=a.type)return!1;switch(a.type){case 1:return this.getWedgeImgHtml(a,t);case 2:return this.getGoodsHtml(a,e,t);default:return!1}}return this.getGoodsHtml(a,e,t)},getGoodsHtml:function(a,e,t,i){var n='suffix-model="add_code" suffix-code="240x360.v1cAC"',r=_getWallParam("ratio");r&&(n='suffix-model="goods_dpr" suffix-ratio="'+r+'"');var s="";if($.each(a.leftbottom_taglist||[],function(a,e){s+='<img src="'+e+'" alt="" class="tagImage" style=""/>'}),1===a.activity)var o='<img src="'+a.activity_img+'" style="">';else if(a.lefttop_taglist){var o="",l=.5;$.each(a.lefttop_taglist,function(a,e){o+='<img src="'+e.img+'" style="width:'+Math.round(e.w*l)+'px;height:auto;">'})}var c="";a.hasSimilarity&&(c=['<a class="likeLink" href="'+a.similarityUrl+'" target="_blank">找相似&nbsp;','<img src="http://s16.mogucdn.com/p1/151209/upload_ie3wmyrvhftdmyzvguzdambqgayde_7x13.png">',"</a>"].join("")),a.link.indexOf("acm")<0&&(a.link=a.link+(a.link.indexOf("?")>0?"&":"?")+"acm="+a.acm+"-"+i);var d=a&&(a.index||0===a.index)?a.index:"";return['<div class="iwf goods_item" data-tradeitemid="'+a.tradeItemId+'" goods-index="'+d+'" >',c,'<a rel="nofollow" href="'+a.link+'" class="img J_dynamic_imagebox loading_bg_120" target="_blank" '+n+'  img-src="'+a.img+'" need-remove="no" data-ptp-customc="'+t+e+'" >',o?'<span class="icon_event_lefttop iwf_icon_taglist">'+o+"</span>":"","</a>",'<a rel="nofollow" target="_blank" href="'+a.link+'" class="goods_info_container">','<p class="title fl" style="',""===s?"height:44px;":"height:22px; white-space: nowrap; text-overflow: ellipsis;",'">'+a.title+"</p>",""!==s?'<p class="icon_event_leftBottom">'+s+"</p>":"",'<div class="goods_info fl">','<b class="price_info yahei">¥'+a.price+"</b>",'<span class="fav_num fr">'+a.cfav+'<img src="http://s18.mogucdn.com/p2/160908/upload_27g4f1ch6akie83hacb676j622b9l_32x30.png" alt=""></span>',"</div>","</a>","</div>"].join("")},getWedgeImgHtml:function(a,e){return['<div class="iwf">','<a rel="nofollow" href="'+a.link+'" class="img J_dynamic_imagebox" target="_blank" suffix-model="orig_narrow" ','img-src="'+a.image+'" need-remove="no" data-ptp-customc="'+e+'_wall_mait_source" style="width:100% !important;height:100% !important;">',"</a>","</div>"].join("")},noGoods:function(){return['<div class="selection_box search_noresult">',"<p>筛选条件太多啦，未找到相关结果</p>",'<a href="javascript:;" onclick="if(window.history){history.back();}else{self.location=document.referrer;}" class="backlast">点击返回上一步</a>',"</div>"].join("")},noMore:function(){return'<div id="like_list_nomore"><div>没有更多啦~</div></div>'},searchNoGoods:function(a){return['<div class="selection_box search_noresult">','<p class="search_nr_img"><img src="http://s18.mogucdn.com/p1/150917/upload_ieztizdegrsdkmlcgmzdambqgyyde_100x100.png"></p>','<p class="search_nr_desc">没有找到与“<span>'+a+"</span>”相关的商品</p>","</div>"].join("")}},t.pageTags.dom=function(a,e){var i=t.pageTags,r=n(e),s=a.result;i.nowPageNo=parseInt(_getWallParam("page"))||parseInt(_getQueryString("page"));var o=parseInt(s.wall.pager.total),l=parseInt(s.wall.pager.perPage);if(i.nowPageNo&&o&&l){var c=Math.ceil(o/l);c=c>100?100:c;var d,p,m="";if(i.nowPageNo>1&&(m+=r(i.nowPageNo-1,"&lt;")),7>c){d=1,p=c;for(var u=d;p>=u;u++)m+=r(u,u)}else{m+=r(1,1),i.nowPageNo>=1&&i.nowPageNo<=3?(d=2,p=5):i.nowPageNo>=c-2&&i.nowPageNo<=c?(d=c-4,p=c-1):(d=i.nowPageNo-2,p=i.nowPageNo+2),d>2&&(m+="<i>...</i>");for(var u=d;p>=u;u++)m+=r(u,u);c-1>p&&(m+="<i>...</i>"),m+=r(c,c)}return i.nowPageNo<c&&(m+=r(i.nowPageNo+1,"下一页&gt;")),'<div class="pagination pd_tb" style="display:none;">'+m+"</div>"}};var n=function(a){var e=t.pageTags;return function(t,i){var n=a.replace(/(_page_)/gi,t),r=t===e.nowPageNo?"c":"";return"<a href='"+n+"' rel='nofollow' class="+r+">"+i+"</a>"}};return MoGu.wall=MoGu.wall||{},MoGu.wall.temp=MoGu.wall.temp||t,t});define("module/lazy-load",function(){function e(){if(!a)return!1;var e=new Image;e.onload=function(){e.width>0&&e.height>0;MOGU.isSupportWebp=!0},e.onerror=function(){MOGU.isSupportWebp=!1},e.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="}var i=navigator.userAgent,t=i.indexOf("MSIE")>0,n=t?300:100,a=i.match(/Chrome\/([\d.]+)/);MOGU.isSupportWebp=!1;var r=$.browser.msie&&"6.0"==$.browser.version&&!$.support.style;e();var o=Date.now||function(){return(new Date).getTime()},x=function(e){this.opts=$.extend({},this.defaults,e),this.init(),this.imgQuality=70,this.imgKeyArr=["80","100","160","180","200","240","280","300","320","360","400","440","480","520","540","560","600","640"],this.imgKeyMap={80:{"1:1":"80x80","7:9":"80x103","3:4":"80x107","2:3":"80x120",999:"80x999"},100:{"1:1":"100x100","7:9":"100x129","3:4":"100x134","2:3":"100x150",999:"100x999"},160:{"1:1":"160x160","7:9":"160x206","3:4":"160x214","2:3":"160x240",999:"160x999"},180:{"1:1":"180x180","7:9":"180x232","3:4":"180x240","2:3":"180x270",999:"180x999"},200:{"1:1":"200x200","7:9":"200x258","3:4":"200x268","2:3":"200x300",999:"200x999"},240:{"1:1":"240x240","7:9":"240x308","3:4":"240x320","2:3":"240x360",999:"240x999"},280:{"1:1":"280x280","7:9":"280x360","3:4":"280x374","2:3":"280x420",999:"280x999"},300:{"1:1":"300x300","7:9":"300x386","3:4":"300x400","2:3":"300x450",999:"300x999"},320:{"1:1":"320x320","7:9":"320x412","3:4":"320x428","2:3":"320x480",999:"320x999"},360:{"1:1":"360x360","7:9":"360x463","3:4":"360x480","2:3":"360x540",999:"360x999"},400:{"1:1":"400x400","7:9":"400x515","3:4":"400x534","2:3":"400x600",999:"400x999"},440:{"1:1":"440x440","7:9":"440x566","3:4":"440x587","2:3":"440x660",999:"440x999"},480:{"1:1":"480x480","7:9":"480x618","3:4":"480x640","2:3":"480x720",999:"480x999"},520:{"1:1":"520x520","7:9":"520x670","3:4":"520x694","2:3":"520x780",999:"520x999"},540:{"1:1":"540x540","7:9":"540x695","3:4":"540x720","2:3":"540x810",999:"540x999"},560:{"1:1":"560x560","7:9":"560x720","3:4":"560x747","2:3":"560x840",999:"560x999"},600:{"1:1":"600x600","7:9":"600x772","3:4":"600x800","2:3":"600x900",999:"600x999"},640:{"1:1":"640x640","7:9":"640x824","3:4":"640x854","2:3":"640x960",999:"640x999"}},this.dpr=window.devicePixelRatio>=1?window.devicePixelRatio:1,this.dprDefMaxWidth=640,this.dprDefRatio="999",this.fistCheck=!1};x.prototype={init:function(){var e=this,i=null,t=o();$(window).scroll(function(r){clearTimeout(i),i=setTimeout(function(){if(a)e.checkImages();else{var i=o();i-t>n&&(t=i,e.checkImages())}},200)}),setTimeout(function(){e.fistCheck=!0,e.checkImages()},0)},checkImages:function(e){var i=e?e:$("body"),t=this;if(t.fistCheck)for(var n=document.documentElement.scrollTop||document.body.scrollTop,a=t.opts.showDistance,r=n-a,o=n+(document.documentElement.clientHeight||document.body.clientHeight)+a,x=i.find("."+t.opts.objsClassName),s=x.length,d=0;s>d;d++){var f=x.eq(d);if(f.attr("img-src")){var c=f.find(".J_dynamic_img"),g=f.hasClass("J_loading"),l=f.attr("need-remove")?f.attr("need-remove"):"no";if(!c.length||"yes"==l){var u="none"!=f.css("display")&&"hidden"!=f.css("visibility")&&0!=f.css("opacity")&&f[0].offsetWidth,m=f.offset().top,p=m+f.height(),h=p>=r&&o>=m;u&&h?c.length||g||(f.addClass("J_loading"),t.loadingImage(f)):"yes"==l&&(c.length||g)&&(f.removeClass("J_loading"),c.remove())}}}},loadingImage:function(e){var i=this;i.addSuffix(e);var t=new Image,n=e.attr("img-src");t.src=i.getWebpUrl(n),t.complete?i.insertImg(t,e):t.onload=function(){i.insertImg(t,e)}},insertImg:function(e,i){i.hasClass("J_loading")&&(i.removeClass("J_loading"),r?i.append('<img class="J_dynamic_img fill_img" src="'+e.src+'" alt=""/>'):(i.append('<img class="J_dynamic_img fill_img" style="display:none;" src="'+e.src+'" alt=""/>'),i.find(".J_dynamic_img").fadeIn(300)))},getWebpUrl:function(e){var i="_999x999.v1c0.";if(!e||e.indexOf(".jpg")<0||e.indexOf(".webp")>0||e.indexOf(".png")>0||e.indexOf(".gif")>0)return e;if(e.indexOf(".jpg_")<0&&e.indexOf(".jpg")==e.length-4&&(e+=i+"jpg"),!MoGu.isSupportWebp)return e;if(e.indexOf(".jpg_")>0){var t=e.split(".");if("jpg"==t[t.length-1])return t[t.length-1]="webp",t.join(".")}return e},getGoodsDprCode:function(e){var i=this,t="",n=".v1cAC";switch(e.attr("suffix-ratio")){case"1:1":case"7:9":case"3:4":case"2:3":t=e.attr("suffix-ratio");break;default:t=i.dprDefRatio,n=".v1c96"}var a=parseInt(e.attr("suffix-width")||e[0].offsetWidth)*i.dpr;(!a||0>a||a>i.dprDefMaxWidth)&&(a=i.dprDefMaxWidth);for(var r=0;r<i.imgKeyArr.length;r++){var o=i.imgKeyArr[r];if(o>=a||o==i.dprDefMaxWidth)return i.imgKeyMap[o][t]+n}return!1},addSuffix:function(e){var i=this,t=e.attr("suffix-model"),n="",a="."+i.imgQuality+".";switch("no"==e.attr("add-quality")&&(a="."),t){case"add_code":n=$.trim(e.attr("suffix-code"));break;case"orig_narrow":window.devicePixelRatio<2&&(n="50000x50000.v1c7E");break;case"goods_dpr":n=i.getGoodsDprCode(e);break;default:return!1}e.attr("suffix-model","end");var r=e.attr("img-src");if(!r||!n||r.indexOf(".webp")>0||r.indexOf(".gif")>0)return!1;if(n="_"+n,r.indexOf(".jpg")<0&&r.indexOf(".png")<0)return!1;if(r.indexOf(".jpg_")>0||r.indexOf(".png_")>0)return!1;var o="",x=r.split(".");if("jpg"==x[x.length-1])o="jpg";else{if("png"!=x[x.length-1])return!1;o="png"}return e.attr("img-src",r+n+a+o),!0},defaults:{objsClassName:"J_dynamic_imagebox",showDistance:0}},window.MoGu=window.MoGu||{};var s=MoGu.dynamicImage;return s||(s=new x({showDistance:$(window).height()}),MoGu.dynamicImage=s),s}),require(["module/lazy-load"],function(e){});define("module/WallExposeLog",function(){var t=function(t){var e="",i=$('#wall_goods_box .ajax_param[param-name|="'+t+'"]');return i&&(e=i.val()),e};window.MoGu=window.MoGu||{};var e=function(t){var e=window.location.href,i=e.indexOf("isLog=true");i>-1&&window.console&&console.log&&console.log(t)},i=function(){var t=MoGu.mgVersion||MoGu.fn&&MoGu.fn.getAppVersion&&MoGu.fn.getAppVersion()||0;this.ver=t>0?t:"",this._mgjuuid=this.getCookie("__mgjuuid"),this.acms=[],this.cpcs=[],this.iids=[],this.indexs=[],this.cparams=[],this.ptpPartC="",this.eventid="70001",this.cpceventid="70004",this.fcid="",this.tabClickId="000000001",this.priceClickId="00000017",this.properties={tableName:"pop",fcid:"",q:""},this.defaultPos=0};return i.prototype.getBaseParams=function(e){var i=this;i.ptpPartC=e.param.ptpPartC,i.eventid=e.param.eventId||"70001",i.cpceventid=e.param.cpcEventId||"70004",i.fcid=e.param.fcid||"",i.properties={tableName:e.param.sort||"",fcid:e.param.fcid||"",q:t("q")||""}},i.prototype.resetBaseParams=function(){var t=this;t.ptpPartC="",t.eventid="",t.fcid="",t.acms=[],t.cpcs=[],t.iids=[],t.indexs=[],t.cparams=[],t.defaultPos=0},i.prototype.getCookie=MoGu.fn&&MoGu.fn.getCookie||MoGu.util&&MoGu.util.getCookie||function(t){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(i))?unescape(e[2]):null},i.prototype.collectItemData=function(t,e){var i=this;t.tradeItemId&&(i.acms.push(t.acm+"-"+e),i.iids.push(t.tradeItemId),i.indexs.push(e),t.cparam&&(i.cpcs.push(t.tradeItemId),i.cparams.push(t.cparam)))},i.prototype.collectListData=function(t){var e=this;t&&t.length>0&&$.each(t,function(t,i){e.collectItemData(i,e.defaultPos++)})},i.prototype.pushAcmLog=function(){var t=this,i={ver:t.ver,ptpPartC:t.ptpPartC,eventid:t.eventid,fcid:t.fcid,_mgjuuid:t._mgjuuid,acms:t.acms,cpcs:t.cpcs,iids:t.iids,indexs:t.indexs,properties:t.properties};t.iids.length?(e("触发图墙曝光打点"),e(i),t.pushLog(i,t.eventid)):e("没有图墙数据，无法触发商品打点"),t.acms=[],t.cpcs=[],t.iids=[],t.indexs=[]},i.prototype.pushCpcLog=function(){var t=this,i={ver:t.ver,ptpPartC:t.ptpPartC,eventid:t.cpceventid,fcid:t.fcid,_mgjuuid:t._mgjuuid,cparams:t.cparams};t.cparams.length?(e("触发cpc商品曝光打点."),e(i),t.pushLog(i,t.cpceventid)):e("没有cpc商品数据，无法触发cpc曝光打点"),t.cparams=[]},i.prototype.pushTabClickLog=function(i){var a=this,o={tableName:i.attr("tab-name")||i.text()||"",fcid:i.attr("tab-fcid")||t("fcid")||"",q_:t("q")||"",index:parseInt(i.attr("tab-index"),10)>=0?i.attr("tab-index"):"",labelName:i.attr("tab-label")||""};e("触发tab点击E事件"),e(o),a.pushLog(o,a.tabClickId)},i.prototype.pushPriceClickLog=function(i){var a=this,o="",p=t("minPrice"),c=t("maxPrice");""==p&&""==c||(o=p+"_"+c);var r={tableName:"筛选",name:t("q")||t("fcid")||"",priceType:o,defined:"0",serviceType:"",classfyTag:""};e("触发价格筛选按钮点击E事件"),e(r),a.pushLog(r,a.priceClickId)},i.prototype.pushLog=function(t,i){setTimeout(function(){if(window.logger&&logger.log)try{logger.log(i,t)}catch(a){e(a)}else if(window.detePtp&&detePtp.logFromtSend){var o=window.detePtp._collectParams||{};t.ptp_cnt=o.ptp_cnt||"",t.ptp_url=o.ptp_url||"",t.ptp_ref=o.ptp_ref||"";try{detePtp.logFromtSend("e",i,t)}catch(a){e(a)}}},1e3)},i.prototype.scrollAjaxPushLog=function(t){var e=this;e.getBaseParams(t),e.collectListData(t.wall.docs),e.pushAcmLog(),e.pushCpcLog()},MoGu.WallExposeLog=i,i}),require(["module/WallExposeLog"],function(t){});define("module/ajaxHistory",function(){var t={},o={},a={};return a={init:function(n){$(".do_not_use_historyapi").length>0||(t=$.extend(!0,{},{jumpTargXOffset:null,wallListener:!1,barStyle:"",filter:{loadingBox:".topLoading",bar:".topLoading .bar",container:"body",goodsBox:".common_goods_wall",dataUrlDom:[".nav_container a"].join(","),goodsBox:".common_goods_wall",jumpTarg:"#wall_goods_box",listenRange:"#wall_goods_box"}},n),o={goodsBox:$(t.filter.goodsBox),jumpTarg:$(t.filter.jumpTarg),container:$(t.filter.container),$bar:null},a.replaceState({},"",location.href),o.container.append(a.barHtml()),o.$box=$(t.filter.loadingBox),o.$bar=$(t.filter.bar),t.wallListener&&a.startWallListener(),a.listener())},pageScrollTo:function(n,e){n=n||o.jumpTarg,e=e||t.jumpTargXOffset||a.getFixSearchBarOffset(),n&&window.scrollTo(0,n.offset().top+e)},pushState:function(t,o,a){history.pushState(t,o,a)},replaceState:function(t,o,a){history.replaceState(t,o,a)},reLoadInitData:function(t){o.goodsBox.trigger("needReloadInitData",t)},getFixSearchBarOffset:function(){return o.fixSearchBarOffset||(o.fixSearchBarOffset=$("#J_sticky_container").length>0?-$("#J_sticky_container").height():null),o.fixSearchBarOffset},listener:function(){var o=this;$("body").on("click",t.filter.dataUrlDom,function(t){t.preventDefault(),o.pageScrollTo(),o.pushState({},"",$(this).attr("href")),o.reLoadInitData()}),window.onpopstate=function(t){t.state&&(a.pageScrollTo(),o.reLoadInitData(_isEmptyObject(t.state)?null:{data:t.state}))}},barHtml:function(){return['<div class="topLoading" style="display: none">','<div class="bar" style="'+t.barStyle+'"></div>',"</div>"].join("")},showBox:function(t){t=t||o.$box,t.show()},hideBox:function(t){t=t||o.$box,t.hide()},progress:function(t,a,n){if(t){var e=o.$bar,a=a||300,i=null,r=null;e.stop(),t instanceof Array?t.length>1?(i=t[0],r=t[1]):r=t[0]:r=t,null!==i&&e.css("width",i+"px"),e.animate({width:r+"%"},a,"linear",function(){n&&"function"==typeof n&&n()})}},startWallListener:function(){var o=$(t.filter.listenRange);$.map(this.wallListener,function(a,n){o.on(n,t.filter.goodsBox,function(t){a(t,arguments)})})},wallListener:{loadInitDataStarted:function(t,arguments){a.showBox(),a.progress([0,45],null,function(){a.progress(55,1e4)});var o=arguments[1];a.replaceState(o,null,location.href)},loadInitDataCompleted:function(t,arguments){a.progress(100,null,function(){a.hideBox()})}}},MoGu.wall=MoGu.wall||{},MoGu.wall.history=MoGu.wall.history||a,a});define("module/wall-mod",["module/WallExposeLog","module/temp"],function(e,a){function n(e){return null===e||"undefined"==typeof e?"":e}function t(e,a){return e+(a||"#common_goods_wall")}function o(e){var a={};return $.map(e,function(n,t){""===e[t]&&null===e[t]&&"undefined"==typeof e[t]||(a[t]=e[t])}),a}MoGu.wall=MoGu.wall||{};var r={temp:a,ptpCVal:0,ajaxUrlDom:$(".ajax_url"),dot:new e,cache:{},goodsBoxHeight:"1500px",goodsPerRow:$("body").hasClass("media_screen_960")?4:5,keyStage:["wallInitStarted","loadInitDataFromCache","loadInitDataStarted","loadInitDataSucceed","loadInitDataCompleted","goodsRendered","allGoodsRendered"]},i={filter:{goodsBoxContainer:"#wall_goods_box",goodsBox:"#common_goods_wall",searchConditionBox:"#search_condition_box",paramContainer:".param_container",navContainer:".nav_container",pageContainer:".page_container",listenRange:"#wall_goods_box",noResult:".search_noresult"}};Fn={};var l={};return l.init=function(e){l.initEnviroment(e),l.keyStageFunc.wallInitStarted(),l.loadInitData(l.loadInitCallBack)},l.initEnviroment=function(e){l.overrideConf(e),l.initCommonVar(),l.event.start(),l.startWallListener()},l.initKeyStageFunc=function(){l.keyStageFunc={},$.each(r.keyStage,function(e,a){l.keyStageFunc[a]=function(){Fn.trigger(a,arguments)}})},l.initCommonVar=function(){r=$.extend(!0,{},r,{goodsBoxContainer:$(i.filter.goodsBoxContainer),goodsBox:$(i.filter.goodsBox),searchConditionBox:$(i.filter.searchConditionBox),paramContainer:$(i.filter.paramContainer),navContainer:$(i.filter.navContainer),pageContainer:$(i.filter.pageContainer)})},l.storeCommonVarFromInitData=function(e){var a=e.result,n=a.wall;r=$.extend(!0,{},r,{ptpWallDoc:a.param?a.param.ptpWallDoc:"",ptpWallCpc:a.param?a.param.ptpWallCpc:"",ptpCVal:a.param?a.param.ptpPartC:"",pageTagHref:n.pager?n.pager.url:null,priceUrl:a.priceUrl,sectionEnd:n.isEnd,book:n.book})},l.overrideConf=function(e){i=$.extend(!0,{},i,e)},l.makeDataKey=function(e){var a=[];return e&&$.map(e,function(e,n){a.push(n+"="+e)}),location.href+"?"+a.join("&")},l.loadInitData=function(e,a){r.ajaxUrl=r.ajaxUrlDom.length>0?r.ajaxUrlDom.val():"";var n=a&&a.data||o(_getWallAllParams()),t=l.makeDataKey(n),e=a&&a.callback||e;r.cache[t]?(l.keyStageFunc.loadInitDataFromCache(n,t),e(r.cache[t])):(l.keyStageFunc.loadInitDataStarted(n),$.ajax({url:r.ajaxUrl,type:"get",timeout:12e3,dataType:"jsonp",jsonp:"callback",data:n,success:function(a){a.status&&1001==a.status.code&&e?(r.cache[t]=a,e(a)):l.render.goods.noGoods(),l.keyStageFunc.loadInitDataSucceed(n,a)},complete:function(){l.keyStageFunc.loadInitDataCompleted(n)},error:function(e){}}))},l.loadInitCallBack=function(e){var a=e.result;a.wall;a&&(l.storeCommonVarFromInitData(e),l.setGoodsSize(),l.render.nav.main(e),l.render.goods.info(e),l.render.pageTag.init(e),l.loadGoodsCallBack(e),r.goodsBox.css("height",""),l.render.goods.noGoods(),l.keyStageFunc.allGoodsRendered(e))},l.setGoodsSize=function(){},l.resetWall=function(){r.dot.resetBaseParams(),_setWallAllParams({book:"",page:"1",section:"0",minPrice:"",maxPrice:"",sort:"pop"}),r.pageTagDom=null,r.goodsBox.html(""),r.sectionEnd=!1,r.goodsBox.css("height",r.goodsBoxHeight)},l.startWallListener=function(){var e=$(i.filter.listenRange);$.map(l.wallListener,function(a,n){e.on(n,i.filter.goodsBox,function(e){a(e,arguments)})})},l.wallListener={needReloadInitData:function(e,a){l.resetWall(),l.event.setParamByUrl(),a=a[1],l.loadInitData(l.loadInitCallBack,a)}},l.loadGoodsCallBack=function(e){var a=e.result||e;a.param&&(_getWallParam("sort")||"pop")===a.param.sort&&(a.wall.docs&&a.wall.docs.length>0&&l.render.goods.init(a),r.pageTagDom&&r.pageTagDom.show())},l.dealLastRowWhenAllGoodsRendered=function(){var e=$("body").hasClass("media_screen_960")?4:5,a=$(".iwf").length,n=a%e;e>n&&a>=10&&$.each(n,function(){$(".J_scroll__V.wallBox .iwf").last().remove()})},l.render={},l.render.nav={main:function(e){if(e.result.wall.pager){var a=l.render.nav;a.container(e)}},container:function(e){var a=l.render.nav,n=r.temp.nav.container(e);r.navContainer.html(n),r.navForm=$(".price_custome"),r.navLeft=$(".sort_nav .nav_left"),r.navRight=$(".sort_nav .nav_right"),a.sort(e),a.definedPrice(e),a.price(e),a.tags(e),a.doubleEleven(e)},sort:function(e){Fn._append(r.navLeft,r.temp.nav.sort(e,r.ptpCVal));var a=_getWallParam("sort")||_getQueryString("sort");r.navLeft.find('.sort[sort-key|="'+a+'"]').addClass("on")},definedPrice:function(e){e.result.priceUrl&&(Fn._append(r.navLeft,r.temp.nav.definedPrice(e)),r.priceNav=r.navLeft.find(".price"),r.priceNav.find(".from").val(_getWallParam("minPrice")||_getQueryString("minPrice")),r.priceNav.find(".to").val(_getWallParam("maxPrice")||_getQueryString("maxPrice")))},price:function(e){e.result.priceUrl&&e.result.priceList&&Fn._append(r.navLeft,r.temp.nav.price(e,r.ptpCVal,r.priceUrl))},tags:function(e){},doubleEleven:function(e){e.result.doubleEleven&&e.result.doubleEleven!=={}&&Fn._append(r.navContainer.find(".sort_nav"),r.temp.nav.doubleEleven(e,r.ptpCVal))}},l.render.goods={init:function(e){if(null!=r.goodsBox){var a=this,n=a.goodsHtml(e);Fn._append(r.goodsBox,n),l.keyStageFunc.goodsRendered(e)}},goodsHtml:function(e){var a=e.wall.docs,n="",t=0;return r.dot.getBaseParams(e),$.each(a,function(e,a){if(r.dot.collectItemData(a,t),a.type&&"mait_source"===a.type)n+=r.temp.goods.getWedgeImgHtml(a,r.ptpCVal);else if(a){var o="";a.cparam?(o=r.ptpWallCpc,r.dot.cparams.length%9===0&&r.dot.cparams.length>0&&r.dot.pushCpcLog()):o=r.ptpWallDoc,n+=r.temp.goods.getGoodsHtml(a,o,r.ptpCVal,t)}(t+1)%45===0&&t>0&&r.dot.pushAcmLog(),t++}),r.dot.cparams.length>0&&r.dot.pushCpcLog(),r.dot.indexs.length>0&&r.dot.pushAcmLog(),n},info:function(e){},noGoods:function(e){var a=$(".iwf").length;0===a&&(r.noResult=$(i.filter.noResult),0===r.noResult.length?r.goodsBox.html(e||r.temp.goods.noGoods()):r.noResult.show(),r.goodsBox.css("height",""),r.pageContainer.html(""))}},l.render.pageTag={init:function(e){if(e.result.wall.pager&&!(r.pageTagDom&&r.pageTagDom.length>0)){var a=r.temp.pageTags.dom(e,r.pageTagHref);r.pageContainer.html(a),r.pageTagDom=$(".pagination")}}},l.event={start:function(){l.event.nav.container(),l.event.pagination()},setParamByUrl:function(e,a){var n=_getQueryString(e,a);_setWallAllParams(n)},nav:{container:function(){var e=["sort","definedPrice","price","tags","doubleEleven"],a=l.event.nav;$(".wall_goods_box").on("click",".price_custom a",function(n){var t=$(this),o=t.attr("data-mark");$.each(e,function(e,r){o===r&&a[r](t,n)})}),$("body").on("keydown",".price_custom input",function(e){13===e.keyCode&&r.priceNav.find(".sbt")[0].click()}),$("body").on("click",".nav_eleven_check",function(){var e=$(this),a=e.is(":checked")?e.attr("mark-id"):"",n=$(".nav_eleven_link"),o=t(n.attr("tpl-url").replace("_itemMarks_",a));n.attr("href",window.logger&&logger.generatePtpParams(o)||o),n[0].click()})},sort:function(e){e.addClass("on").siblings().removeClass("on"),r.dot.pushTabClickLog(e)},definedPrice:function(e,a){var n=r.priceNav.find(".from").val().replace(/[^\d]/gi,""),o=r.priceNav.find(".to").val().replace(/[^\d]/gi,"");if(parseInt(n||0)>parseInt(o||0))return alert("价格上限不能低于价格下限"),a.preventDefault(),void a.stopPropagation();var i=t(r.priceUrl.replace("_minPrice_",n).replace("_maxPrice_",o));e.attr("href",window.logger&&logger.generatePtpParams(i)||i)},price:function(e){var a=e.text().split("-"),n=r.priceNav.find(".from"),t=r.priceNav.find(".to");n.val(a[0]),t.val(a[1])},tags:function(){var e=$(this).find("input").val(),a=l.event.nav.makeTagStr(e);setParamInPage("tags",a)},makeTagStr:function(e){var a=n(getParamInPage("tag")),t=""===a?[]:a.split(",");return $.inArray(e,t)>=0?t.splice($.inArray(e,t),1):t.push(e),t.join(",")}},pagination:function(){$(".page_container").on("click","a",function(){$(this).addClass("c").siblings().removeClass("c")})}},Fn.trigger=function(e,a,n){n=n||r.goodsBox,n.trigger(e,a)},window._append=Fn._append=function(e,a){e&&e.append(a)},l.initKeyStageFunc(),l.Common=r,l.Conf=i,MoGu.wall=l,l});require(["module/wall-mod","module/ajaxHistory","module/lazy-load"],function(o,t,e){var n={goodsBoxFilter:".common_goods_wall",goodsBoxContainerFilter:"#wall_goods_box"},i={$body:$("body"),goodsBox:$(n.goodsBoxFilter),goodsBoxContainer:$(n.goodsBoxContainerFilter)},a={startWallListener:function(o){$.map(o,function(o,t){i.$body.on(t,n.goodsBoxFilter,function(t){t.stopPropagation(),o()})})}};a.startWallListener({goodsRendered:function(){e.checkImages()}}),navigator.userAgent.match(/Chrome\/([\d.]+)/)&&window.history&&history.pushState&&t.init({wallListener:!0}),o.init()});